"use strict";(self.webpackChunkquiz_lab_lms=self.webpackChunkquiz_lab_lms||[]).push([[689],{1689:(Re,E,c)=>{c.r(E),c.d(E,{AuthenticationModule:()=>R});var p=c(9132),l=c(433),g=c(2346),e=c(4650),T=c(2340),C=c(529);class d{constructor(i){this.httpClient=i,this.API_URL=T.N.apiUrl+"/login",this.API_URL_RE=T.N.apiUrl+"/register",this.API_URL_FORGET=T.N.apiUrl+"/forget-password",this.API_URL_SEND_MAIL=T.N.apiUrl+"/register/send-mail",this.AeqweqweL=T.N.apiUrl+"/active-account"}login(i){return this.httpClient.post(this.API_URL,i)}loginWithGoogle(i){return this.httpClient.post(`${this.API_URL}/google`,i)}forgetPassword(i){return this.httpClient.post(`${this.API_URL_FORGET}`,i)}register(i){return this.httpClient.post(this.API_URL_RE,i)}registerSenMail(i){return this.httpClient.post(`${this.API_URL_SEND_MAIL}`,i)}activeAccount(){return this.httpClient.get(`${this.AeqweqweL}`)}}d.\u0275fac=function(i){return new(i||d)(e.LFG(C.eN))},d.\u0275prov=e.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"});var O=c(9651),L=c(5861),Z=c(1135),N=c(5684),F=c(9300),z=c(5698),D=c(4707),M=c(7579);class q extends M.x{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(i){const{hasError:t,_hasValue:s,_value:n,thrownError:r,isStopped:a,_isComplete:u}=this;t?i.error(r):(a||u)&&(s&&i.next(n),i.complete())}next(i){this.isStopped||(this._value=i,this._hasValue=!0)}complete(){const{_hasValue:i,_value:t,_isComplete:s}=this;s||(this._isComplete=!0,i&&super.next(t),super.complete())}}var Y=c(5191),U=c(6895);class V{constructor(){}loadScript(i,t,s,n=null){if(typeof document<"u"&&!document.getElementById(i)){let r=document.createElement("script");r.async=!0,r.src=t,r.onload=s,n||(n=document.head),n.appendChild(r)}}}class j{}const J={oneTapEnabled:!0};let I=(()=>{class o extends V{constructor(t,s){super(),this.clientId=t,this.initOptions=s,this.changeUser=new e.vpe,this._socialUser=new Z.X(null),this._accessToken=new Z.X(null),this._receivedAccessToken=new e.vpe,this.initOptions={...J,...this.initOptions},this._socialUser.pipe((0,N.T)(1)).subscribe(this.changeUser),this._accessToken.pipe((0,N.T)(1)).subscribe(this._receivedAccessToken)}initialize(t){return new Promise((s,n)=>{try{this.loadScript(o.PROVIDER_ID,"https://accounts.google.com/gsi/client",()=>{if(google.accounts.id.initialize({client_id:this.clientId,auto_select:t,callback:({credential:r})=>{const a=this.createSocialUser(r);this._socialUser.next(a)},prompt_parent_id:this.initOptions?.prompt_parent_id,itp_support:this.initOptions.oneTapEnabled}),this.initOptions.oneTapEnabled&&this._socialUser.pipe((0,F.h)(r=>null===r)).subscribe(()=>google.accounts.id.prompt(console.debug)),this.initOptions.scopes){const r=this.initOptions.scopes instanceof Array?this.initOptions.scopes.filter(a=>a).join(" "):this.initOptions.scopes;this._tokenClient=google.accounts.oauth2.initTokenClient({client_id:this.clientId,scope:r,prompt:this.initOptions.prompt,callback:a=>{a.error?this._accessToken.error({code:a.error,description:a.error_description,uri:a.error_uri}):this._accessToken.next(a.access_token)}})}s()})}catch(r){n(r)}})}getLoginStatus(){return new Promise((t,s)=>{this._socialUser.value?t(this._socialUser.value):s(`No user is currently logged in with ${o.PROVIDER_ID}`)})}refreshToken(){return new Promise((t,s)=>{google.accounts.id.revoke(this._socialUser.value.id,n=>{n.error?s(n.error):t(this._socialUser.value)})})}getAccessToken(){return new Promise((t,s)=>{this._tokenClient?(this._tokenClient.requestAccessToken({hint:this._socialUser.value?.email}),this._receivedAccessToken.pipe((0,z.q)(1)).subscribe(t)):s(this._socialUser.value?"No token client was instantiated, you should specify some scopes.":"You should be logged-in first.")})}revokeAccessToken(){return new Promise((t,s)=>{this._tokenClient?this._accessToken.value?google.accounts.oauth2.revoke(this._accessToken.value,()=>{this._accessToken.next(null),t()}):s("No access token to revoke"):s("No token client was instantiated, you should specify some scopes.")})}signIn(){return Promise.reject('You should not call this method directly for Google, use "<asl-google-signin-button>" wrapper or generate the button yourself with "google.accounts.id.renderButton()" (https://developers.google.com/identity/gsi/web/guides/display-button#javascript)')}signOut(){var t=this;return(0,L.Z)(function*(){google.accounts.id.disableAutoSelect(),t._socialUser.next(null)})()}createSocialUser(t){const s=new j;s.idToken=t;const n=this.decodeJwt(t);return s.id=n.sub,s.name=n.name,s.email=n.email,s.photoUrl=n.picture,s.firstName=n.given_name,s.lastName=n.family_name,s}decodeJwt(t){const n=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(window.atob(n).split("").map(function(a){return"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(r)}}return o.PROVIDER_ID="GOOGLE",o})(),b=(()=>{class o{constructor(t,s,n){this._ngZone=s,this._injector=n,this.providers=new Map,this.autoLogin=!1,this._user=null,this._authState=new D.t(1),this.initialized=!1,this._initState=new q,t instanceof Promise?t.then(r=>{this.initialize(r)}):this.initialize(t)}get authState(){return this._authState.asObservable()}get initState(){return this._initState.asObservable()}initialize(t){this.autoLogin=void 0!==t.autoLogin&&t.autoLogin;const{onError:s=console.error}=t;t.providers.forEach(n=>{this.providers.set(n.id,"prototype"in n.provider?this._injector.get(n.provider):n.provider)}),Promise.all(Array.from(this.providers.values()).map(n=>n.initialize(this.autoLogin))).then(()=>{if(this.autoLogin){const n=[];let r=!1;this.providers.forEach((a,u)=>{const k=a.getLoginStatus();n.push(k),k.then(S=>{this.setUser(S,u),r=!0}).catch(console.debug)}),Promise.all(n).catch(()=>{r||(this._user=null,this._authState.next(null))})}this.providers.forEach((n,r)=>{(0,Y.b)(n.changeUser)&&n.changeUser.subscribe(a=>{this._ngZone.run(()=>{this.setUser(a,r)})})})}).catch(n=>{s(n)}).finally(()=>{this.initialized=!0,this._initState.next(this.initialized),this._initState.complete()})}getAccessToken(t){var s=this;return(0,L.Z)(function*(){const n=s.providers.get(t);if(!s.initialized)throw o.ERR_NOT_INITIALIZED;if(!n)throw o.ERR_LOGIN_PROVIDER_NOT_FOUND;if(!(n instanceof I))throw o.ERR_NOT_SUPPORTED_FOR_ACCESS_TOKEN;return yield n.getAccessToken()})()}refreshAuthToken(t){return new Promise((s,n)=>{if(this.initialized){const r=this.providers.get(t);r?"function"!=typeof r.refreshToken?n(o.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN):r.refreshToken().then(a=>{this.setUser(a,t),s()}).catch(a=>{n(a)}):n(o.ERR_LOGIN_PROVIDER_NOT_FOUND)}else n(o.ERR_NOT_INITIALIZED)})}refreshAccessToken(t){return new Promise((s,n)=>{if(this.initialized)if(t!==I.PROVIDER_ID)n(o.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN);else{const r=this.providers.get(t);r instanceof I?r.revokeAccessToken().then(s).catch(n):n(o.ERR_LOGIN_PROVIDER_NOT_FOUND)}else n(o.ERR_NOT_INITIALIZED)})}signIn(t,s){return new Promise((n,r)=>{if(this.initialized){let a=this.providers.get(t);a?a.signIn(s).then(u=>{this.setUser(u,t),n(u)}).catch(u=>{r(u)}):r(o.ERR_LOGIN_PROVIDER_NOT_FOUND)}else r(o.ERR_NOT_INITIALIZED)})}signOut(t=!1){return new Promise((s,n)=>{if(this.initialized)if(this._user){let a=this.providers.get(this._user.provider);a?a.signOut(t).then(()=>{s(),this.setUser(null)}).catch(u=>{n(u)}):n(o.ERR_LOGIN_PROVIDER_NOT_FOUND)}else n(o.ERR_NOT_LOGGED_IN);else n(o.ERR_NOT_INITIALIZED)})}setUser(t,s){t&&s&&(t.provider=s),this._user=t,this._authState.next(t)}}return o.ERR_LOGIN_PROVIDER_NOT_FOUND="Login provider not found",o.ERR_NOT_LOGGED_IN="Not logged in",o.ERR_NOT_INITIALIZED="Login providers not ready yet. Are there errors on your console?",o.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN="Chosen login provider is not supported for refreshing a token",o.ERR_NOT_SUPPORTED_FOR_ACCESS_TOKEN="Chosen login provider is not supported for getting an access token",o.\u0275fac=function(t){return new(t||o)(e.LFG("SocialAuthServiceConfig"),e.LFG(e.R0b),e.LFG(e.zs3))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),B=(()=>{class o{constructor(t,s){this.type="icon",this.size="medium",this.text="signin_with",this.shape="rectangular",this.theme="outline",this.logo_alignment="left",this.width="",this.locale="",s.initState.pipe((0,z.q)(1)).subscribe(()=>{Promise.resolve(this.width).then(n=>{n>"400"||n<"200"&&""!=n?Promise.reject("Please note .. max-width 400 , min-width 200 (https://developers.google.com/identity/gsi/web/tools/configurator)"):google.accounts.id.renderButton(t.nativeElement,{type:this.type,size:this.size,text:this.text,width:this.width,shape:this.shape,theme:this.theme,logo_alignment:this.logo_alignment,locale:this.locale})})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq),e.Y36(b))},o.\u0275dir=e.lG2({type:o,selectors:[["asl-google-signin-button"]],inputs:{type:"type",size:"size",text:"text",shape:"shape",theme:"theme",logo_alignment:"logo_alignment",width:"width",locale:"locale"}}),o})(),G=(()=>{class o{constructor(t){if(t)throw new Error("SocialLoginModule is already loaded. Import it in the AppModule only")}static initialize(t){return{ngModule:o,providers:[b,{provide:"SocialAuthServiceConfig",useValue:t}]}}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(o,12))},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[b],imports:[U.ez]}),o})();var A=c(1481),h=c(3679),_=c(5635),x=c(7044),m=c(6704);function Q(o,i){1&o&&(e.ynx(0),e._uU(1,"Email is not valid!"),e.BQk())}function K(o,i){1&o&&(e.ynx(0),e._uU(1,"Please input your Email!"),e.BQk())}function $(o,i){if(1&o&&(e.YNc(0,Q,2,0,"ng-container",34),e.YNc(1,K,2,0,"ng-container",34)),2&o){const t=i.$implicit;e.Q6J("ngIf",t.hasError("email")),e.xp6(1),e.Q6J("ngIf",t.hasError("required"))}}class f{constructor(i,t,s,n,r,a,u){this.fb=i,this.authenticationService=t,this.router=s,this.message=n,this.activatedRoute=r,this.authService=a,this.titleService=u,this.titleService.setTitle("QuizLab - Sign In")}ngOnInit(){this.activatedRoute.queryParams.subscribe(i=>{this.courseId=Number(i["redirect-router"])}),this.loginForm=this.fb.group({email:[null,[l.kI.required]],password:[null,[l.kI.required]]}),this.authService.authState.subscribe(i=>{this.user=i,this.loggedIn=null!=i,console.log(this.user),this.accountResponse={email:this.user.email,firstName:this.user.firstName,lastName:this.user.lastName,fullName:this.user.name,idByGoogle:this.user.id,idTokenByGoogle:this.user.idToken,userImage:this.user.photoUrl},this.sendAccountToBackEnd()})}login(){for(const t in this.loginForm.controls)this.loginForm.controls[t].markAsDirty(),this.loginForm.controls[t].updateValueAndValidity();this.loginForm.invalid||(g._.removeLoginInfo(),this.authenticationService.login(this.loginForm.value).subscribe({next:t=>{t.accessToken&&(g._.saveAccessToken(t.accessToken),g._.saveAccount(t.email),g._.saveRole(t.role),this.message.success("Sign In Success"),this.courseId?this.router.navigate([`/courses/${this.courseId}`]):this.goToHomePage())},error:t=>{this.message.error("Email or password incorrect!"),this.router.navigate(["auth/login"],{queryParams:{"redirect-router":this.courseId}})}}))}sendAccountToBackEnd(){this.authenticationService.loginWithGoogle(this.accountResponse).subscribe({next:i=>{i.accessToken&&(g._.saveAccessToken(i.accessToken),g._.saveAccount(i.email),g._.saveRole(i.role),this.message.success("Sign In Success"),this.courseId?this.router.navigate([`/courses/${this.courseId}`]):this.goToHomePage())}})}goToHomePage(){this.router.navigate(["/courses"])}goToRegister(){this.courseId?this.router.navigate(["auth/register"],{queryParams:{"redirect-router":this.courseId}}):this.router.navigate(["auth/register"])}}function H(o,i){1&o&&(e.ynx(0),e._uU(1,"Please input your Full Name!"),e.BQk())}function W(o,i){1&o&&e.YNc(0,H,2,0,"ng-container",7),2&o&&e.Q6J("ngIf",i.$implicit.hasError("required"))}function X(o,i){1&o&&(e.ynx(0),e._uU(1,"Email is not valid!"),e.BQk())}function ee(o,i){1&o&&(e.ynx(0),e._uU(1,"Please input your Email!"),e.BQk())}function te(o,i){if(1&o&&(e.YNc(0,X,2,0,"ng-container",7),e.YNc(1,ee,2,0,"ng-container",7)),2&o){const t=i.$implicit;e.Q6J("ngIf",t.hasError("email")),e.xp6(1),e.Q6J("ngIf",t.hasError("required"))}}function oe(o,i){1&o&&(e.ynx(0),e._uU(1,"Please input your password!"),e.BQk())}function ie(o,i){1&o&&(e.ynx(0),e._uU(1,"Password must be at least 8 characters!"),e.BQk())}function ne(o,i){if(1&o&&(e.YNc(0,oe,2,0,"ng-container",7),e.YNc(1,ie,2,0,"ng-container",7)),2&o){const t=i.$implicit;e.Q6J("ngIf",t.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.hasError("Password8"))}}function se(o,i){1&o&&(e.ynx(0),e._uU(1,"Please confirm your password!"),e.BQk())}function re(o,i){1&o&&(e.ynx(0),e._uU(1,"Password is inconsistent!"),e.BQk())}function ae(o,i){if(1&o&&(e.YNc(0,se,2,0,"ng-container",7),e.YNc(1,re,2,0,"ng-container",7)),2&o){const t=i.$implicit;e.Q6J("ngIf",t.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.hasError("rePassword"))}}function le(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"h4",9),e._uU(2,"Sign Up"),e.qZA(),e.TgZ(3,"form",10),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.register())}),e.TgZ(4,"div",11)(5,"nz-form-item",12)(6,"nz-form-control",13)(7,"label"),e._uU(8,"Full Name "),e.TgZ(9,"span",14),e._uU(10,"*"),e.qZA()(),e.TgZ(11,"nz-input-group",15),e._UZ(12,"input",16),e.YNc(13,W,1,1,"ng-template",null,17,e.W1O),e.qZA()()(),e.TgZ(15,"nz-form-item",12)(16,"nz-form-control",13)(17,"label"),e._uU(18,"Your Email "),e.TgZ(19,"span",14),e._uU(20,"*"),e.qZA()(),e.TgZ(21,"nz-input-group",18),e._UZ(22,"input",19),e.YNc(23,te,2,2,"ng-template",null,20,e.W1O),e.qZA()()(),e.TgZ(25,"nz-form-item",12)(26,"nz-form-control",13)(27,"label"),e._uU(28,"Password "),e.TgZ(29,"span",14),e._uU(30,"*"),e.qZA()(),e.TgZ(31,"nz-input-group",21),e._UZ(32,"input",22),e.YNc(33,ne,2,2,"ng-template",null,23,e.W1O),e.qZA()()(),e.TgZ(35,"nz-form-item",12)(36,"nz-form-control",13)(37,"label"),e._uU(38,"Re-enter new password "),e.TgZ(39,"span",14),e._uU(40,"*"),e.qZA()(),e.TgZ(41,"nz-input-group",21),e._UZ(42,"input",24),e.YNc(43,ae,2,2,"ng-template",null,25,e.W1O),e.qZA()()(),e.TgZ(45,"div",26)(46,"button",27),e._uU(47,"Sign Up"),e.qZA()(),e.TgZ(48,"div",28)(49,"p",29)(50,"small",30),e._uU(51,"Already have an account ?"),e.qZA(),e.TgZ(52,"a",31),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.goToLoign())}),e._uU(53,"Sign In"),e.qZA()()()()()()}if(2&o){const t=e.MAs(14),s=e.MAs(24),n=e.MAs(34),r=e.MAs(44),a=e.oxw();e.xp6(3),e.Q6J("formGroup",a.registerForm),e.xp6(3),e.Q6J("nzErrorTip",t),e.xp6(10),e.Q6J("nzErrorTip",s),e.xp6(10),e.Q6J("nzErrorTip",n),e.xp6(10),e.Q6J("nzErrorTip",r)}}function ce(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",32)(1,"h4"),e._uU(2,"We sent a recovery link to your email adress "),e.qZA(),e.TgZ(3,"h5"),e._uU(4," Check your email to get recover link: "),e.qZA(),e.TgZ(5,"p",33),e._uU(6),e.qZA(),e.TgZ(7,"div"),e._UZ(8,"img",34),e.qZA(),e.TgZ(9,"p"),e._uU(10,"If you can't find it in your mail box, look in spam"),e.qZA(),e._UZ(11,"hr"),e.TgZ(12,"a",35),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.sendMail())}),e._uU(13," Didn't get the recover link? Resend it"),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(6),e.Oqu(null==t.registerForm.value?null:t.registerForm.value.email)}}f.\u0275fac=function(i){return new(i||f)(e.Y36(l.qu),e.Y36(d),e.Y36(p.F0),e.Y36(O.dD),e.Y36(p.gz),e.Y36(b),e.Y36(A.Dx))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-login"]],decls:52,vars:2,consts:[[1,"bg-home","bg-circle-gradiant","d-flex","align-items-center","vh-100"],[1,"bg-overlay","bg-overlay-white"],[1,"container"],[1,"row","justify-content-center"],[1,"col-md-8","col-lg-6"],[1,"card","login-page","bg-white","shadow","rounded","border-0"],[1,"card-body"],[1,"text-center","login-logo"],["routerLink","/",1,"logo","text-dark"],[1,"text-primary"],["nz-form","",1,"login-form","mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"form-group","position-relative","col-lg-12"],[3,"nzErrorTip"],[1,"text-danger"],["nzPrefixIcon","mail",1,"input-rounder","pb-2","pt-2","user-icon"],["nz-input","","type","email","formControlName","email","placeholder","Email","required","","email",""],["emailErrorTp1",""],["nzErrorTip","Please input your Password!"],["nzPrefixIcon","lock",1,"input-rounder","pb-2","pt-2"],["type","password","nz-input","","formControlName","password","placeholder","Password"],[1,"col-lg-12","mb-2"],[1,"d-flex","justify-content-between"],[1,"forgot-pass","mb-0"],["routerLink","/auth/forget-password",1,"text-dark","font-weight-bold"],[1,"col-lg-12","mb-0"],[1,"btn","btn-primary","btn-block"],[1,"col-lg-12","mt-4","text-center"],[1,"list-unstyled","social-icon","mb-0","mt-3"],[1,"list-inline-item"],[1,"col-12","text-center"],[1,"mb-0","mt-3"],[1,"text-dark","mr-2"],[1,"text-dark","font-weight-bold",3,"click"],[4,"ngIf"]],template:function(i,t){if(1&i&&(e.TgZ(0,"section",0),e._UZ(1,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"a",8),e._uU(9,"QuizLab"),e.TgZ(10,"span",9),e._uU(11,"."),e.qZA()()(),e.TgZ(12,"form",10),e.NdJ("ngSubmit",function(){return t.login()}),e.TgZ(13,"div",11)(14,"nz-form-item",12)(15,"nz-form-control",13)(16,"label"),e._uU(17,"Your Email "),e.TgZ(18,"span",14),e._uU(19,"*"),e.qZA()(),e.TgZ(20,"nz-input-group",15),e._UZ(21,"input",16),e.qZA(),e.YNc(22,$,2,2,"ng-template",null,17,e.W1O),e.qZA()(),e.TgZ(24,"nz-form-item",12)(25,"nz-form-control",18)(26,"label"),e._uU(27,"Password "),e.TgZ(28,"span",14),e._uU(29,"*"),e.qZA()(),e.TgZ(30,"nz-input-group",19),e._UZ(31,"input",20),e.qZA()()(),e.TgZ(32,"div",21)(33,"div",22)(34,"p",23)(35,"a",24),e._uU(36,"Forgot password ?"),e.qZA()()()(),e.TgZ(37,"div",25)(38,"button",26),e._uU(39,"Sign in"),e.qZA()(),e.TgZ(40,"div",27)(41,"h6"),e._uU(42,"Or Sign In With"),e.qZA(),e.TgZ(43,"ul",28)(44,"li",29),e._UZ(45,"asl-google-signin-button"),e.qZA()()(),e.TgZ(46,"div",30)(47,"p",31)(48,"small",32),e._uU(49,"Don't have an account ?"),e.qZA(),e.TgZ(50,"a",33),e.NdJ("click",function(){return t.goToRegister()}),e._uU(51,"Sign Up"),e.qZA()()()()()()()()()()()),2&i){const s=e.MAs(23);e.xp6(12),e.Q6J("formGroup",t.loginForm),e.xp6(3),e.Q6J("nzErrorTip",s)}},dependencies:[p.rH,U.O5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.on,l.sg,l.u,h.t3,h.SK,_.Zp,_.gB,x.w,m.Lr,m.Nx,m.Fd,B],styles:["h4[_ngcontent-%COMP%]{color:#335ade;font-size:36px}a.logo.text-dark[_ngcontent-%COMP%]{text-align:center;font-size:37px;padding:20px 0}.text-center.login-logo[_ngcontent-%COMP%]{padding:15px 0}"]});class P{constructor(i,t,s,n,r,a){this.fb=i,this.authenticationService=t,this.router=s,this.message=n,this.activatedRoute=r,this.titleService=a,this.result=!0,this.confirmValidatorRePassword=u=>u.value?u.value!==this.registerForm.value.password?{rePassword:!0,error:!0}:{}:{required:!0,error:!0},this.confirmValidatorPassword=u=>u.value?u.value.length<8?{Password8:!0,error:!0}:{}:{required:!0,error:!0},this.titleService.setTitle("QuizLab - Sign Up")}ngOnInit(){this.activatedRoute.queryParams.subscribe(i=>{this.courseId=Number(i["redirect-router"])}),this.registerForm=this.fb.group({fullName:[null,[l.kI.required]],email:[null,[l.kI.required]],password:[null,[l.kI.required,this.confirmValidatorPassword]],rePassword:[null,[l.kI.required,this.confirmValidatorRePassword]],errorMessageEmail:[null]})}register(){for(const t in this.registerForm.controls)this.registerForm.controls[t].markAsDirty(),this.registerForm.controls[t].updateValueAndValidity();this.registerForm.invalid||(g._.removeLoginInfo(),this.authenticationService.register(this.registerForm.value).subscribe(t=>{t.error||(this.message.success("Register successfully!"),this.result=!1)}))}sendMail(){g._.removeLoginInfo(),this.authenticationService.registerSenMail(this.registerForm.value).subscribe({next:t=>{t.success&&this.message.success("Mail successfully!")}})}goToLoign(){this.courseId?window.location.href=`auth/login?redirect-router=${this.courseId}`:this.router.navigate(["auth/login"])}}function ue(o,i){1&o&&(e.ynx(0),e._uU(1,"Email is not valid!"),e.BQk())}function pe(o,i){1&o&&(e.ynx(0),e._uU(1,"Please input your Email!"),e.BQk())}function ge(o,i){if(1&o&&(e.YNc(0,ue,2,0,"ng-container",7),e.YNc(1,pe,2,0,"ng-container",7)),2&o){const t=i.$implicit;e.Q6J("ngIf",t.hasError("email")),e.xp6(1),e.Q6J("ngIf",t.hasError("required"))}}function de(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"h4",9),e._uU(2,"Forgot Password "),e.qZA(),e.TgZ(3,"p",10),e._uU(4,"Please enter your mail address to receive recover link!"),e.qZA(),e.TgZ(5,"form",11),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.RequestResetUser())}),e.TgZ(6,"nz-form-item",12)(7,"nz-form-control",13)(8,"label",14),e._uU(9," Email Address "),e.qZA(),e.TgZ(10,"nz-input-group",15),e._UZ(11,"input",16),e.qZA(),e.YNc(12,ge,2,2,"ng-template",null,17,e.W1O),e.qZA()(),e.TgZ(14,"button",18),e._uU(15,"Reset Password"),e.qZA()(),e.TgZ(16,"p",19),e._uU(17," Forget it, "),e.TgZ(18,"a",20),e._uU(19," Send me Back"),e.qZA(),e._uU(20," to the Sign in screen"),e.qZA()()}if(2&o){const t=e.MAs(13),s=e.oxw();e.xp6(5),e.Q6J("formGroup",s.forgetPasswordForm),e.xp6(2),e.Q6J("nzErrorTip",t)}}function me(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",21)(1,"h4"),e._uU(2,"We sent a recovery link to your email adress "),e.qZA(),e.TgZ(3,"h5"),e._uU(4," Check your email to get recover link: "),e.qZA(),e.TgZ(5,"p",22),e._uU(6),e.qZA(),e.TgZ(7,"div"),e._UZ(8,"img",23),e.qZA(),e.TgZ(9,"p"),e._uU(10,"If you can't find it in your mail box, look in spam"),e.qZA(),e._UZ(11,"hr"),e.TgZ(12,"a",24),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.RequestResetUser())}),e._uU(13," Didn't get the recover link? Resend it"),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(6),e.Oqu(null==t.forgetPasswordForm.value?null:t.forgetPasswordForm.value.email)}}P.\u0275fac=function(i){return new(i||P)(e.Y36(l.qu),e.Y36(d),e.Y36(p.F0),e.Y36(O.dD),e.Y36(p.gz),e.Y36(A.Dx))},P.\u0275cmp=e.Xpm({type:P,selectors:[["app-register"]],decls:9,vars:2,consts:[[1,"bg-home","bg-circle-gradiant","d-flex","align-items-center"],[1,"bg-overlay","bg-overlay-white"],[1,"container"],[1,"row","justify-content-center"],[1,"col-md-8","col-lg-6"],[1,"card","login-page","bg-white","shadow","rounded","border-0"],[1,"card-body"],[4,"ngIf"],["class","text-center py-5",4,"ngIf"],[1,"card-title","text-center"],["nz-form","",1,"login-form","mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"form-group","position-relative","col-lg-12"],[3,"nzErrorTip"],[1,"text-danger"],["nzPrefixIcon","user",1,"input-rounder","pb-2","pt-2"],["nz-input","","type","text","formControlName","fullName","placeholder","Full Name","required",""],["combineTpl",""],["nzPrefixIcon","mail",1,"input-rounder","pb-2","pt-2"],["nz-input","","type","email","formControlName","email","placeholder","Email","email",""],["combineTpl1",""],["nzPrefixIcon","lock",1,"input-rounder","pb-2","pt-2"],["type","password","nz-input","","formControlName","password","placeholder","Password"],["passwordErrorTpl",""],["type","password","nz-input","","formControlName","rePassword","placeholder","RePassword","required",""],["RepasswordErrorTpl",""],[1,"col-lg-12","mb-0"],[1,"btn","btn-primary","btn-block"],[1,"col-12","text-center"],[1,"mb-0","mt-3"],[1,"text-dark","mr-2"],[1,"text-dark","font-weight-bold",3,"click"],[1,"text-center","py-5"],[1,"font-weight-bold"],["src","/assets/images/forget-password/email-received-icon.png",1,"w-25"],[1,"text-primary",3,"click"]],template:function(i,t){1&i&&(e.TgZ(0,"section",0),e._UZ(1,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),e.YNc(7,le,54,5,"div",7),e.YNc(8,ce,14,1,"div",8),e.qZA()()()()()()),2&i&&(e.xp6(7),e.Q6J("ngIf",t.result),e.xp6(1),e.Q6J("ngIf",!t.result))},dependencies:[U.O5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.on,l.sg,l.u,h.t3,h.SK,_.Zp,_.gB,x.w,m.Lr,m.Nx,m.Fd],styles:["h4[_ngcontent-%COMP%]{color:#335ade;font-size:36px}"]});class y{constructor(i,t,s,n,r){this.fb=i,this.authenticationService=t,this.router=s,this.message=n,this.titleService=r,this.result=!0,this.titleService.setTitle("QuizLab - Forget Password")}ngOnInit(){this.forgetPasswordForm=this.fb.group({email:[null,[l.kI.required]]})}RequestResetUser(){for(const t in this.forgetPasswordForm.controls)this.forgetPasswordForm.controls[t].markAsDirty(),this.forgetPasswordForm.controls[t].updateValueAndValidity();this.forgetPasswordForm.invalid||this.authenticationService.forgetPassword(this.forgetPasswordForm.value).subscribe({next:t=>{this.message.success("Send email success!"),this.result=!1}})}}y.\u0275fac=function(i){return new(i||y)(e.Y36(l.qu),e.Y36(d),e.Y36(p.F0),e.Y36(O.dD),e.Y36(A.Dx))},y.\u0275cmp=e.Xpm({type:y,selectors:[["app-forget-password"]],decls:10,vars:2,consts:[[1,"bg-home","bg-circle-gradiant","d-flex","align-items-center"],[1,"bg-overlay","bg-overlay-white"],[1,"container"],[1,"row","justify-content-center"],[1,"col-md-8","col-lg-6"],[1,"card","login-page","bg-white","shadow","rounded","border-0"],[1,"card-body"],[4,"ngIf"],["class","text-center py-5",4,"ngIf"],[1,"text-center"],[1,"mt-lg-5","text-center"],["nz-form","","action","#",1,"pb-3",3,"formGroup","ngSubmit"],[1,"form-group"],[3,"nzErrorTip"],[1,"d-flex"],["nzPrefixIcon","mail",1,"input-rounder","pb-2","pt-2"],["nz-input","","type","email","formControlName","email","placeholder","Email","required","","email","",1,"input-email"],["emailError",""],["type","submit",1,"btn","btn-primary","text-center"],[1,"pt-4"],["href","/login"],[1,"text-center","py-5"],[1,"font-weight-bold"],["src","/assets/images/forget-password/email-received-icon.png",1,"w-25"],[1,"text-primary",3,"click"]],template:function(i,t){1&i&&(e.TgZ(0,"body")(1,"section",0),e._UZ(2,"div",1),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6),e.YNc(8,de,21,2,"div",7),e.YNc(9,me,14,1,"div",8),e.qZA()()()()()()()),2&i&&(e.xp6(8),e.Q6J("ngIf",t.result),e.xp6(1),e.Q6J("ngIf",!t.result))},dependencies:[U.O5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.on,l.sg,l.u,h.t3,h.SK,_.Zp,_.gB,x.w,m.Lr,m.Nx,m.Fd],styles:[".btn[_ngcontent-%COMP%]{width:100%;color:#fff;padding:10px;font-size:18px}.btn[_ngcontent-%COMP%]:hover{background-color:#2d3436;color:#fff}.form-control[_ngcontent-%COMP%]:focus{border-color:#18dcff;box-shadow:none}h4[_ngcontent-%COMP%]{color:#335ade;font-size:36px}.cw[_ngcontent-%COMP%]{width:35%}@media (max-width: 992px){.cw[_ngcontent-%COMP%]{width:60%}}@media (max-width: 768px){.cw[_ngcontent-%COMP%]{width:80%}}@media (max-width: 492px){.cw[_ngcontent-%COMP%]{width:90%}}p.mt-lg-5[_ngcontent-%COMP%]{font-size:19px}"]});var he=c(2715),_e=c(8783);class w{constructor(i,t,s,n,r){this.authenticationService=i,this.router=t,this.activeRoute=s,this.rePassService=n,this.message=r}ngOnInit(){this.token=this.activeRoute.snapshot.queryParamMap.get("token"),null===this.token&&this.router.navigate(["/login"]),this.rePassService.checkToken(this.token).subscribe({next:i=>{"INVALID"===i.data.status?(this.message.error("Token invalid!"),this.router.navigate(["/login"])):"EXPIRE"===i.data.status&&(this.message.error("URL is expire time, please send back email!"),this.router.navigate(["/register"]))},error:i=>{this.message.error("Token invalid!"),this.router.navigate(["/login"])}}),this.activeRoute.paramMap.subscribe(i=>{console.log(this.token),this.token&&g._.saveAccessToken(this.token)}),this.authenticationService.activeAccount().subscribe({next:i=>{this.router.navigate(["/login"]),this.message.success("Account Active!")},error:i=>{this.router.navigate(["/login"])}})}}w.\u0275fac=function(i){return new(i||w)(e.Y36(d),e.Y36(p.F0),e.Y36(p.gz),e.Y36(_e.B),e.Y36(O.dD))},w.\u0275cmp=e.Xpm({type:w,selectors:[["app-active-account"]],decls:2,vars:0,template:function(i,t){1&i&&(e.TgZ(0,"p"),e._uU(1,"active-account works!"),e.qZA())}});const fe=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:f},{path:"register",component:P},{path:"forget-password",component:y},{path:"reset-password",component:he.L},{path:"active-account",component:w},{path:"login?redirect-router=:id",component:f}];class v{}v.\u0275fac=function(i){return new(i||v)},v.\u0275mod=e.oAB({type:v}),v.\u0275inj=e.cJS({imports:[p.Bz.forChild(fe),p.Bz]});var ve=c(2375);class R{}R.\u0275fac=function(i){return new(i||R)},R.\u0275mod=e.oAB({type:R}),R.\u0275inj=e.cJS({providers:[{provide:"SocialAuthServiceConfig",useValue:{autoLogin:!1,providers:[{id:I.PROVIDER_ID,provider:new I("891834885217-kt7ud6esmaagleu0vbvlqcn2440v9hfc.apps.googleusercontent.com")}],onError:o=>{console.error(o)}}}],imports:[v,ve.m,G]})}}]);